See [ex15.18](15.18.cpp) and [ex15.19](15.19.cpp).
